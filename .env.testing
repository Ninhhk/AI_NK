# Testing Environment Configuration
# Inherits from .env.example and overrides for testing

# =============================================================================
# TESTING OVERRIDES
# =============================================================================

# Environment
ENVIRONMENT=testing
TESTING=true

# Server settings
LOG_LEVEL=debug
RELOAD=false
DEBUG=true
DEVELOPMENT_MODE=false

# Streamlit
STREAMLIT_SERVER_HEADLESS=true
STREAMLIT_SERVER_PORT=8502  # Different port to avoid conflicts

# Backend
HOST=127.0.0.1
PORT=8001  # Different port for testing

# Ollama (use mock responses for testing)
SKIP_OLLAMA_CHECK=true
MOCK_OLLAMA_RESPONSES=true
MODEL_NAME=test_model
OLLAMA_MODEL_NAME=test_model

# Database (use in-memory database for testing)
DATABASE_URL=sqlite:///:memory:
DATABASE_POOL_SIZE=1
DATABASE_MAX_OVERFLOW=0

# Redis (use test database)
REDIS_URL=redis://localhost:6379/15
REDIS_DB=15

# File storage (use temporary directories)
UPLOAD_DIR=./tests/temp/uploads
TEMP_DIR=./tests/temp
BACKUP_DIR=./tests/temp/backups

# Features (disable background tasks for testing)
ENABLE_CLEANUP_TASKS=false
ENABLE_BACKGROUND_CLEANUP=false
ENABLE_MODEL_MANAGEMENT=true
ENABLE_SLIDE_GENERATION=true

# File retention (very short for testing)
DOCUMENT_RETENTION_DAYS=1
SLIDE_RETENTION_DAYS=1
UPLOAD_RETENTION_HOURS=1

# Security (test credentials)
ADMIN_USERNAME=test_admin
ADMIN_PASSWORD=test_password
SECRET_KEY=test_secret_key_for_testing_only

# CORS (allow all for testing)
CORS_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true

# Logging (minimal for testing)
LOG_FORMAT=%(levelname)s - %(message)s
LOG_FILE=./tests/temp/test.log

# Performance (minimal for testing)
WORKER_CONCURRENCY=1
WORKER_TIMEOUT=30

# Cache settings (minimal for testing)
CACHE_TTL=60
CACHE_MAX_SIZE=10

# Rate limiting (very lenient for testing)
RATE_LIMIT_REQUESTS=10000
RATE_LIMIT_WINDOW=60

# Health checks (faster for testing)
HEALTH_CHECK_INTERVAL=5
HEALTH_CHECK_TIMEOUT=2

# Upload limits (smaller for testing)
UPLOAD_MAX_SIZE=1048576  # 1MB for testing
